<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.etri.rest.api.mapper.SumoMapper">
		
	<select id="selectTlLogic" parameterType="request" resultType="hashMap">
		<![CDATA[
		SELECT T.ID, T.TLLOGICTYPE, T.PROGRAMID, CONCAT(T.OFFSET) AS OFFSET, P.SEQ, P.DURATION, P.STATE,			   
			   GetYellowDuration(T.ID, 1, P.SEQ) AS YELLOW_DURATION,
			   GetRedDuration(T.ID, 1, P.SEQ) AS RED_DURATION		
		  FROM TLOGIC T, `PHASE` P
		 WHERE T.PROGRAMID = 0
		   AND T.ID = P.ID
		   AND T.PROGRAMID = P.PROGRAMID
		 ORDER BY T.ID, P.SEQ
		]]>  
	</select>	
			
	<select id="selectTLtoConnection" parameterType="list" resultType="net.etri.rest.api.sumo.service.Connection">
		SELECT FROM_EDGE, TO_EDGE, FROMLANE, TOLANE, TL, LINKINDEX
		  FROM CON
		 WHERE TL IN (
		 <foreach item="tl" index="index" collection="list" separator=" , ">   
		  '${tl.id}'
		 </foreach> 
		  ) 
		  ORDER BY TL, LINKINDEX
	</select>
				
	<select id="selectConnection" parameterType="request" resultType="net.etri.rest.api.sumo.service.Connection">
		SELECT FROM_EDGE, TO_EDGE, FROMLANE, TOLANE
		  FROM CON
	</select>	
					
</mapper>